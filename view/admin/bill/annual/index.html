{extend name="common/layout" /}
{block name="main"}
<t-card class="list-card-container" :bordered="false">
  <t-button theme="primary" style="margin-bottom: 10px;" @click="handleArrange">
    整理数据
  </t-button>
  <t-table :data="tableData" :columns="columns" row-key="id" vertical-align="top" :bordered="true" size="small"
    active-row-type="single" :hover="true" :loading="tableLoading">
  </t-table>
</t-card>
{/block}

{block name="script"}
<script>
  const data = {
    tableData: [],
    tableLoading: false,
    columns: [
      { title: '房产名', colKey: 'name', width: 100, align: 'left', fixed: 'left', },
      { title: '详细地址', colKey: 'address', width: 160 },
      { title: '房东名称', colKey: 'landlord', width: 100 },
      { title: '房东手机', colKey: 'phone', width: 160 },
      { title: '房东身份证', colKey: 'id_card', width: 160 },
    ],
  };

  function f() {
    return {
      init: function () {
        this.tableLoading = true;
        axiosGet("{:url('query')}").then(response => {
          if (response.code == 1) {
            this.tableData = response.data;
          } else {
            this.$message.error('系统出错了!!!');
          }
          this.tableLoading = false;
        });
      },
      handleArrange() {
        axiosGet("{:url('query')}").then(response => {
          if (response.code == 1) {
            this.tableData = response.data;
          } else {
            this.$message.error('系统出错了!!!');
          }
          this.tableLoading = false;
        });
      },
    }
  }
</script>
{/block}